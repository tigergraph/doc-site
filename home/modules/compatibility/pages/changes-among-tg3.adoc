= Compatibility among TigerGraph 3 versions
:description: lists the compatibility issues between different versions of TigerGraph 3, for users who plan to migrate

This page lists the discontinued features or other incompatible changes from one TigerGraph 3.x version to another TigerGraph 3.x version.

[NOTE]
====
The list does not include bug fixes where a feature was not working correctly before and now is working according to the specification.
Those issues are listed on the Release Notes page.
====

== TigerGraph Compatibility changes from 3.10 to 3.11

[options="header,autowidth"]
|===
| Version | Description | Recommendation

| 3.11.0
| The `graph` field is now included in CDC messages generated by the TigerGraph CDC service.
| Update any xref:system-management:change-data-capture/cdc-message-example.adoc#_message_examples[CDC message] parsers or consumers to handle the new `graph` field.

| 3.11.0
| In CDC messages, the format of map values has changed.
| Modify applications processing xref:system-management:change-data-capture/cdc-message-example.adoc#_message_examples[CDC map values] to match the new format.

|===

== TigerGraph Compatibility changes from 3.9 to 3.10

[options="header,autowidth"]
|===
| Version | Description | Recommendation

| 3.10.0
| New xref:3.10@security:security:gsql-file-input-policy.adoc[File Input Policy] feature introduces a list of local files locations that may not be used to load data.
| Review the file input/output policies before upgrading. Note that TigerGraph enforces an implicit blocklist of restricted file locations, which cannot be modified. See xref:3.10@tigergraph-server:security:gsql-file-input-policy.adoc#_backward_compatibility[Input policy backward compatibility].

| 3.10.0
| The `gbar` command is removed and replaced with `gadmin` backup.
| Use `gadmin backup` for new backups. You can still restore older `gbar` backups with `gadmin backup restore`, since the restore process remains the same.

|===

== TigerGraph Compatibility changes from 3.6 to 3.9

[options="header,autowidth"]
|===
| Version | Description | Recommendation

| 3.9.3
| Edge operations require privileges on both the edge and its source/target vertices.
| Grant the same data privilege on the edge type and the related vertex types.

| 3.9.3
| PRINT now removes spaces from expression-based output labels. For example, `count(DISTINCT @@ids`) changes to `count(DISTINCT@@ids`).
| Update queries if they depend on output labels with spaces.

| 3.9.2
| Betweenness Centrality algorithm: `reverse_edge_type` changed to `reverse_edge_type_set (SET<STRING>)`
| Update queries to use the new parameter name and type.

| 3.9.2
| Vertices with string-type primary IDs cannot have empty string values.
| Ensure input data has no empty string IDs.

| 3.9.2
| Kafka Connector default mode changed from EOF="false" to EOF="true".
| Set EOF explicitly in your configs if your workflow requires "false."

| 3.9.2
| Default retention time for `Informant` and `TS3` services reduced from 30 to 7 days.
| Adjust retention settings for longer periods if needed.

| 3.9.2
| `/informant/metrics/get/cpu-memory` accepts lists of ServiceDescriptors.
| Update API calls to provide a list format.

| 3.9
| UDFs named `to_string()` or with the `tg_` prefix are not accepted due to new xref:3.10@tigergraph-server:security:index.adoc#_udf_file_scanning[security checks].
| Rename UDFs and update code to avoid these names for smooth upgrades.

|===


== TigerGraph Compatibility changes from 3.4 to 3.6

[options="header,autowidth"]
|===
| Version | Description | Recommendation

| 3.6.3
| A vertex having an empty string as its primary id is considered bad data and will not be loaded.
| Check input files and loading jobs to insure you are not attempting to load vertices with no ID.

| 3.6
| A single `POST-ACCUM` clause can no longer reference more than one vertex alias in Syntax V1.
| Rewrite query, possibly using multiple `POST-ACCUM`s

| 3.6
| `GET /requesttoken endpoint` is dropped.
| Use `POST /requestoken` instead, with credentials in the request body.

| 3.6
| Deploying TigerGraph in Kubernetes now requires more service account permissions than previous versions.
| See Prerequisites section in xref:kubernetes:quickstart-with-gke.adoc[], xref:kubernetes:quickstart-with-aks.adoc[], and xref:kubernetes:quickstart-with-eks.adoc[].
|===

== TigerGraph 3.4 Compatibility Changes

[options="header,autowidth"]
|===
| Version | Description of Change | Recommendation

| 3.4
| The built-in role `queryreader` can no longer run queries that include updates to the database.
| To emulate the old `queryreader` role, create a role with all `queryreader` privileges, and also grant the `WRITE_DATA` privilege to the new role.

| 3.4
| The built-in role `admin` can no longer create users.
| To emulate the old `admin` role, create a global role with all `admin` privileges, and also grant the `WRITE_USER` privilege to the new role.

|===


== TigerGraph 3.2 Compatibility Changes

[options="header,autowidth"]
|===
| Version | Description of Change | Recommendation

| 3.2
| Subqueries: A distributed mode main query cannot call a distributed mode subquery.
| Refactor such queries.

| 3.2
| Log files: Default logging level for GSQL logs has changed from `DEBUG` to `INFO`.
| Set the xref:reference:configuration-parameters.adoc#_GSQL[logging level to GSQL] to `DEBUG` when needed.

|===


== TigerGraph 3.1 Compatibility Changes

[options="header,autowidth"]
|===
| Version | Description of Change | Recommendation

| 3.1.1
a| Loading `TAGS`: syntax changed from BY (OR\|OVERWRITE) to `BY OR\|OVERWRITE`

(parentheses no longer used)
| Update loading jobs which use `TAGS`

| 3.1.1
| REST endpoint renamed from `dbsanitycheck` to `deleted_vertex_check`
| Inform admin users

| 3.1
| `STRING COMPRESS` data type is deprecated. New data objects may not have this data type. Existing data objects continue to work.
| Use `STRING` data type instead for new schemas.

| 3.1
| GSQL: A schema change can no longer drop a vertex type if it is used in an edge type.
| Consider whether you intend to also remove the vertex type from any edges.

|===

